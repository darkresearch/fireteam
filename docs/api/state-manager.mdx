---
title: "StateManager API"
description: "Detailed API reference for Fireteam's StateManager class"
---

## StateManager Class

The StateManager class handles all project state persistence, ensuring clean isolation between projects and reliable state recovery.

**Location:** `/home/claude/fireteam/state/manager.py`

## Class Reference

### Constructor

```python
StateManager()
```

No parameters required. Automatically configures paths from `config.py`.

## Methods

### initialize_project()

Create a fresh project state.

```python
def initialize_project(project_dir: str, goal: str) -> dict
```

**Parameters:**
- `project_dir` (str): Absolute path to project directory
- `goal` (str): Project objective

**Returns:** dict - Fresh state with initialized fields

**Example:**
```python
sm = StateManager()
state = sm.initialize_project("/home/claude/project", "Build a CLI calculator")
```

### load_state()

Load current state from disk.

```python
def load_state() -> dict | None
```

**Returns:** dict or None if no state exists

**Example:**
```python
state = sm.load_state()
if state:
    print(f"Cycle: {state['cycle_number']}")
```

### update_state()

Update specific state fields.

```python
def update_state(updates: dict) -> dict
```

**Parameters:**
- `updates` (dict): Fields to update

**Returns:** dict - Updated complete state

**Example:**
```python
state = sm.update_state({
    "status": "executing",
    "current_plan": "New plan text"
})
```

### update_completion_percentage()

Update completion % with parse failure handling.

```python
def update_completion_percentage(parsed_value: int | None, logger) -> int
```

**Parameters:**
- `parsed_value` (int|None): Parsed completion % or None if parse failed
- `logger`: Logger instance for warnings

**Returns:** int - Completion % to use (parsed or last known)

**Example:**
```python
completion = sm.update_completion_percentage(92, logger)
```

### increment_cycle()

Advance to next cycle.

```python
def increment_cycle() -> dict
```

**Returns:** dict - Updated state with incremented cycle_number

### mark_completed()

Mark project as completed.

```python
def mark_completed() -> dict
```

**Returns:** dict - State with completed=True and timestamp

See [API Overview](/api/overview) for more details.
